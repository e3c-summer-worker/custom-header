<style>
    li {
        border-radius: 7px;
        background: white;
        padding: 12px;
        width: 200px;
        height: 20px;
    }

    a {
        position: relative;
        left: auto;
        bottom: 50%;
    }

</style>
<link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/@e3c-summer-worker/homepage-ticker@1.1.1/build/ticker.css">
<script
    src="https://cdn.jsdelivr.net/npm/@e3c-summer-worker/homepage-ticker@1.1.1/build/homepage-ticker-elm.js"></script>
<script>
    // observe the creation of an element
    // https://stackoverflow.com/a/65585776
    // often window.onload is not enough, as we have to wait longer for Squarespace to load the elements
    const elemSelector = '.sqs-slice-group.group-copy.align-center-vert.full-width';

    // what to run when the element is created
    const callback = (elem) => {
        console.log('Element.is created!', elem)
        const elm = document.createElement('div');
        elm.setAttribute('id', 'elm');

        // insert after wrapper
        // https://stackoverflow.com/a/4793630
        elem.parentNode.insertBefore(elm, elem);
        Elm.HomepageTicker.init({ node: elm });
    }

    const observer = new MutationObserver(mutations => [...mutations]
        .flatMap((mutation) => [...mutation.addedNodes])
        .filter((node) => node.matches && node.matches(elemSelector))
        .forEach(callback))


    window.onload = () => {
        console.log('Window onloaded! Observer is now observing...')
        observer.observe(document.body, { childList: true, subtree: true });
    }
</script>
